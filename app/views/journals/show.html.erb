<div class="min-h-screen bg-customred text-white flex items-center justify-center py-10">
  <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl space-y-8">
    
    <!-- 📅 日付表示 -->
      <div class="text-xl font-semibold text-gray-700 text-end">
        <%= @journal.created_at.strftime('%Y年%m月%d日') %>
      </div>

    <!-- 📝 タイトル表示 -->
    <div class="text-center">
      <h2 class="text-md font-medium text-gray-700 mb-2">日記タイトル</h2>
      <p class="text-xl font-bold text-gray-900"><%= @journal.title %></p>
    </div>

    <!-- 🎵 曲情報（選択後のみ表示） -->
    <% if @journal.song_name.present? || @journal.artist_name.present? || @journal.spotify_track_id.present? %>
      <div class="bg-gray-100 p-6 text-center rounded-lg shadow-inner space-y-4">
        <h2 class="text-xl font-bold text-gray-800 mb-4">🎵 選択した曲情報</h2>

        <% if @journal.song_name.present? %>
          <p class="text-lg font-medium text-gray-800">
            🎼 曲名: <%= @journal.song_name %>
          </p>
      <% end %>
      
        
        <% if @journal.artist_name.present? %>
          <p class="text-lg font-medium text-gray-800">
            🎤 アーティスト: <%= @journal.artist_name %>
          </p>
        <% end %>
      
        <% if @journal.spotify_track_id.present? %>
          <div class="mb-4">
            <iframe style="border-radius:12px" 
                    src="https://open.spotify.com/embed/track/<%= @journal.spotify_track_id %>" 
                    width="100%"
                    height="352"
                    frameBorder="0" 
                    allowfullscreen="" 
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                    loading="lazy"
                    class="w-full rounded-lg">
            </iframe>
          </div>
        <% end %>
      </div>
    <% end %>

    <!-- 📝 本文表示 -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md text-center">
      <h2 class="text-md font-medium text-gray-700 mb-2">📖 本文</h2>
      <p class="text-md text-gray-800 font-bold p-4 rounded-md">
        <%= @journal.content %>
      </p>
    </div>

    <!-- 😊 感情表示 -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md text-center">
      <h2 class="text-md font-medium text-gray-700 mb-2">😊 感情</h2>
      <p class="text-md text-gray-800 font-bold p-4 rounded-md">
        <%= @journal.emotion %>
      </p>
    </div>
    <!-- ✏️ アクションボタン -->
    <% if @journal.user == current_user %>
      <div class="flex justify-between items-center mt-6 space-x-4">
        <%= link_to edit_journal_path(@journal), class: "px-4 py-2 bg-yellow-500 text-white font-medium rounded-md hover:bg-yellow-600 transition flex items-center" do %>
          <span>✏️ 編集</span>
        <% end %>
        
        <%= link_to "https://twitter.com/share?url=#{CGI.escape(journal_url(@journal))}", 
            target: '_blank', 
            class: "px-4 py-2 bg-black text-white font-medium rounded-md hover:bg-gray-800 transition flex items-center",
            rel: "nofollow",
            data: { toggle: "tooltip", placement: "bottom" },
            title: "Xでシェア" do %>
          <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
          <span>共有</span>
        <% end %>

        <%= button_to journal_path(@journal), 
            method: :delete, 
            data: { confirm: "本当に削除しますか？" }, 
            class: "px-4 py-2 bg-red-500 text-white font-medium rounded-md hover:bg-red-600 transition flex items-center" do %>
          <span>🗑️ 削除</span>
        <% end %>
      </div>
    <% end %>

    <!-- 🔙 戻るボタン -->
    <div class="text-center mt-6">
      <% if request.referer&.include?('timeline') %>
        <%= link_to "← タイムラインに戻る", timeline_journals_path, class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% elsif request.referer&.include?('mypage') %>
        <%= link_to "← マイページに戻る", mypage_path, class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% elsif request.referer&.include?('other_user') %>
        <%= link_to "← #{@user.name}さんのページに戻る", other_user_path(@user), class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% else %>
        <%= link_to "← 日記一覧に戻る", journals_path, class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% end %>
    </div>
  </div>
</div>
