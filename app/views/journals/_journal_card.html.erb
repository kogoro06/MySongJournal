<div class="bg-gray-300 rounded-lg shadow h-full flex flex-col p-4">
<!-- ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã€æŠ•ç¨¿è€…ï¼‰ -->
<div class="flex flex-col">
  <h3 class="font-bold text-lg line-clamp-2 mb-1">
    <%= journal.title %>
  </h3>
  <div class="flex justify-between text-sm text-gray-600">
    <div class="flex items-center gap-2">
      <span>by <%= journal.user.name %></span>
      <% if journal.user.avatar.attached? %>
      <%= image_tag journal.user.avatar, class: 'w-10 h-10 rounded-full object-cover border border-primary border-300' %>
    <% else %>
      <%= image_tag 'profile_sample.png', class: 'w-10 h-10 rounded-full object-cover border border-primary border-300' %>
    <% end %>
      <% if user_signed_in? && journal.user != current_user %>
        <%= render 'follows/button', user: journal.user %>
      <% end %>
    </div>
  </div>
</div>

  <!-- ã‚¸ãƒ£ã‚±ãƒƒãƒˆç”»åƒ -->
  <div class="relative mb-4">
    <%= image_tag journal.album_image.presence || 'no-image.png',
        class: "w-full aspect-square object-cover rounded-lg",
        alt: "ã‚¢ãƒ«ãƒãƒ ã‚¸ãƒ£ã‚±ãƒƒãƒˆç”»åƒ" %>
  </div>

  <!-- æ›²æƒ…å ± -->
  <div class="space-y-2 mb-4">
    <div class="flex items-center gap-2 text-sm text-gray-600">
      <span class="w-5 flex-shrink-0">ðŸŽ¤</span>
      <span class="truncate"><%= journal.artist_name %></span>
    </div>
    <div class="flex items-center gap-2 text-sm text-gray-600">
      <span class="w-5 flex-shrink-0">ðŸŽµ</span>
      <span class="truncate"><%= journal.song_name %></span>
    </div>
  </div>

  <!-- ã‚¿ã‚° -->
  <div class="flex flex-wrap gap-2 mb-4">
    <div class="inline-flex items-center px-3 py-1 bg-red-500 text-white rounded-full text-xs min-w-[80px] justify-center">
      <%= journal.emotion %>
    </div>
    <% if journal.genre.present? %>
      <div class="inline-flex items-center px-3 py-1 bg-blue-500 text-white rounded-full text-xs min-w-[80px] justify-center">
        <%= t("activerecord.attributes.journal.genre.#{journal.genre}") %>
      </div>
      <div class="inline-flex items-center px-3 py-1 bg-green-500 text-white rounded-full text-xs min-w-[80px] justify-center">
      <%= journal.created_at.strftime("%m/%d %H:%M") %>
      </div>
    <% end %>
  </div>

  <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
  <div class="mt-auto space-y-2">
    <% if user_signed_in? && journal.user == current_user %>
      <div class="flex gap-2">
        <%= link_to 'è©³ç´°', journal_path(journal), data: { turbo: false },
            class: "flex-1 text-center py-2 px-4 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 min-w-[120px]" %>
        <%= link_to "ç·¨é›†", edit_journal_path(journal), data: { turbo: false },
            class: "flex-1 text-center py-2 px-4 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600 min-w-[120px]" %>
        <%= button_to journal_path(journal),
            method: :delete,
            data: { turbo: false, confirm: "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ" },
            class: "flex-1" do %>
          <button type="submit" class="w-full text-center py-2 px-4 bg-red-500 text-white text-sm rounded hover:bg-red-600 min-w-[120px]">
            å‰Šé™¤
          </button>
        <% end %>
      </div>
    <% else %>
      <div class="flex gap-2">
        <%= link_to 'è©³ç´°', journal_path(journal), data: { turbo: false },
            class: "flex-1 text-center py-2 px-4 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 min-w-[120px]" %>
        <% if user_signed_in? %>
          <%= render 'journals/favorite_button', journal: journal %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>